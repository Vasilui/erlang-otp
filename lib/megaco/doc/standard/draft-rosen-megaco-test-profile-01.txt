


Megaco                                                         B. Rosen 
Internet Draft                                                  Marconi 
Document: draft-rosen-test-profile-01.txt                               
Category: Informational                                                 
         
 
                     Interoperability Test Profile 
 
 
Status of this Memo 
 
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 [1].  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of 
   six months and may be updated, replaced, or obsoleted by other 
   documents at any time. It is inappropriate to use Internet- Drafts 
   as reference material or to cite them other than as "work in 
   progress."  
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt  
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
    
    
    
    
1. Abstract 
    
   This document describes a profile for use in interoperability 
   testing of the Megaco/H.248 protocol and a set of scenarios to try 
   increasingly difficult mechanisms in the protocol.  To support early 
   phase testing, it is useful to define a simple, easy to implement 
   set of characteristics that allow initial implementations to get 
   very basic functions working. By implementing this profile, testing 
   a variety of MGs against a variety of MGCs is possible.  The test 
   scenarios describe high-level behavior expected by the MGs and MGCs, 
   but not explicit message sequences. 
    
   There are a number of profiles to be used by different classes of 
   gateways.  MGCs are expected to be able to control at least one, and 
   ideally most of these profiles.   
    
    
2. Profile For Analog Line Gateways 
    
   The analog line test profile is described as one profile, but is 
   actually a set of increasing functionality profiles.  The levels are 
   assigned a numeric identifier, from Level 1 to Level 4.  The 
   scenarios specify which level of the profile is required. It is 
  
Megaco           Informational - Expires August, 2001                1 
                     Megaco Interop Test Profile            July 2000 
 
 
   possible to define 4 separate profiles, but many devices will 
   implement several of the levels, and it was not considered 
   appropriate to have to reconfigure the device for a specific level 
   for each scenario.   
   Level 1 corresponds to the simplest possible gateway that can detect 
           off hook, and create a media stream, but little else 
   Level 2 corresponds to a low functionality gateway that can detect 
           DTMF and generate simple call progress tones so that basic 
           call is possible 
   Level 3 corresponds to a full functionality residential gateway with 
           local signalling/DTMF detection  
    
   2.1 Identification 
   This profile shall be entitled "Analog Line Interoperability Test 
   Profile".   The version number shall be 1.  This name shall be 
   returned from a conforming gateway when sending the ServiceChange 
   message as part of initial registration of the MG in the Profile 
   section of the ServiceChange Descriptor.   
    
   2.2 Packages Implemented 
   A conforming gateway shall implement at least the following 
   packages: 
      Package Name      ID     Ver Level Defined In 
       Network          nt      1   1     Annex E 
       Analog Line Supv al      1   1     Annex E* 
       RTP              rtp     1   1     Annex E* 
       Generic          g       1   2     Annex E 
       Base Root        root    1   2     Annex E 
       Tone Detect      tonedet 1   2     Annex E 
       DTMF Detect      dd      1   2     Annex E 
       Tone Generator   tonegen 1   3     Annex E 
       DTMF Generate    dg      1   3     Annex E 
    
   *Note: In general, increasing levels incorporate all lower level 
   requirements.   
    
   Gateways not supporting RTP (for example, an MG supporting ATM AAL1) 
   need not support the RTP package, but instead would support the 
   appropriate media transport package. 
    
   2.3 Naming Conventions 
    
   2.3.1 Gateway Naming Conventions 
   The MG name, used in Registration and in the header of commands, 
   shall be the string "GATEWAY" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MG test environments, the 
   digit will normally be zero.  In multiple gateway scenarios, the 
   gateways are numbered from 0 to 9. 
    
   2.3.2 Controller Naming Conventions 
   The MGC name, used in Registration and in the header of commands, 
   shall be the string "CONTROLLER" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MGC test environments, the 
  
megaco          Informational - Expires January, 2001               2 
                     Megaco Interop Test Profile            July 2000 
 
 
   digit will normally be zero.  In multiple MGC scenarios, the 
   gateways are numbered from 0 - 9. 
    
   2.3.3 Termination Names 
    
   2.3.3.1 Physical Terminations 
   There shall be two at least two terminations – "line/1" and 
   "line/2".  Some tests need a third termination, which would be names 
   line/3 
    
   2.3.3.2 Ephemeral Terminations 
   RTP flows shall be named "rtp/1", "rtp/2", … 
    
   2.4 Topology Descriptor 
   Topology descriptors are needed only for one test, 4.11. 
    
    
   2.5 Service Change Descriptor 
   For Level 1, only a Primary MGC should be provisioned (normally, 
   "GATEWAY0").  For Level 2-4, the Gateway shall allow one primary and 
   at least two secondary MGCs to be provisioned for registration.   
    
   2.6 Transport 
   MGCs shall implement both UDP and TCP transport.  MGs can implement 
   either or both.  If the MG can use both, attempt testing with UDP 
   first, then repeat with TCP. 
    
   2.7 Security 
   Testing of security (IPSEC is recommended) is included.  Most tests 
   can be completed without security mechanisms, but testing with 
   security enabled in advanced tests is highly recommended. 
    
   2.8 Encoding 
   Most gateways at the test will use text encoding.  Binary encoding 
   will be tested.  
     
   2.9 Media 
   IP connected gateways shall implement RTP flows with G.711 encoding.  
   ATM connected gateways shall use AAL1 or AAL2 flows with G.711 
   encoding. 
    
    
    
3. Scenarios for Analog Line Gateways 
    
   3.1 Hotel Phone 
   Requires Level 1 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  When off hook is detected on term/1, 
   send ring to term/2.  When off hook is detected on term/2, stop 
   ring, and create media flow between term/1 and term/2.  When on hook 
   is detected on term/1, tear down the media flow. 
  
megaco          Informational - Expires January, 2001               3 
                     Megaco Interop Test Profile            July 2000 
 
 
    
   3.2 Basic Call 
   Requires Level 2 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  When off hook is detected on term/1, 
   establish a North American Dialing Plan digitmap.  If 555-1212 is 
   called, send ring to term/2.  Proceed as above. 
    
   3.3 Normal Operation of Simple Gateway 
   Requires Level 3. 
    
   Use your normal registration procedures.  Registration should always 
   succeed.  Audit as normal.  When offhook is detected on term/1, 
   return dialtone to term/1 and establish a North American Dialing 
   Plan.  If any number except 555-1212 is dialed, return error tone.  
   If 555-1212 is dialed, send ring to term/2 and ringback to term/1.  
   When term/2 goes off-hook, stop ring and ringback and establish 
   media flow.  When either term/1 or term/2 goes on hook, tear down 
   media flow. 
    
   3.4 Two Gateway Basic Call 
   Requires Level 3 
    
   Use your normal registration procedures for two MGs.  Audit as 
   normal.  Follow the same procedure as in Scenario 3.3, but construct 
   the call from MG0 term/1 to MG1 term/2. 
    
   3.5 Secondary Registration 
   Requires Level 1 
    
   Provision MG for MGC0 as primary and MGC1 as secondary.  Attempt to 
   register to MGC0.   MGC0 should refuse and not offer a 
   ServiceChangeMgcId.  MGC1 should accept registration.   
   Repeat with provisioning MG for MGC0 as primary and no secondary.  
   Attempt to register to MGC0.  MGC0 should refuse and offer MGC1 as 
   ServiceChangeMgcId.  Registration to MGC1 should succeed. 
 
   3.6 Three way call with two local terminations 
   Requires Level 3 
   
   As with Scenario 3.3.  While the call is up, term/3 calls term/1. 
   Use Flash to switch between term/2 and term/3 
   
   3.7 Three way call with two remotes 
   As with Scenario 3.6, but use MG0 term/1 calling MG1 term/1, 
   and then MG0 term/2 calls MG1 term/1 
   
4. Feature invocation for Analog Line Gateways 
  In this section, the MGC (or MG as noted) should create a situation 
  where the listed Megaco protocol feature is used.  The MGC is free to 

  
megaco          Informational - Expires January, 2001               4 
                     Megaco Interop Test Profile            July 2000 
 
 
  use any constructs in the protocol but it is recommended that care be 
  taken to use such constructs incrementally – try to introduce only 
  one new construct per test 
   
  4.1 Test using an embedded event 
  4.2 Test using an embedded signal 
  4.3 Test use of a media descriptor (not just local/remote), but 
        Media{Stream=1{Local…. 
  4.4 Test mid association Audit of gateway 
        Make sure you use W audits as well as partial wild cards 
  4.5 Create a loop of command execution use the network impairment box  
      to test that the transaction processing works under stress. 
  4.6  If not already done: 
        Use all signal types 
        Override default signal type 
        Create a signal timeout condition 
        Use a sequential signal list 
  4.7  Test MG taking terminations out of service gracefully 
  4.8  Test MG taking terminations out of service forced 
  4.9  Test MGC taking terminations out of service forced 
  4.10 Corner cases digit maps, with various syntactic constructs 
  4.11 Test topology to create one ways and isolates 
        Audit the context properties while you do this 
  4.12 Test audit descriptor in Add, Move and Modify 
  4.13 Test null Audit suppresses statistics in Subtract 
  4.14 Try a couple of nops - make sure they work 
  4.16 Test Subtract ALL  
  4.17 Verify correct behavior of property values set in NULL, 
        Added to a Context, Modified, and Subtracted 
  4.18 Test the values in the audit table of 7.2.5 
  4.19 Test transaction pending 
  4.20 Test multiple transactions in process (ie don't wait for  
        reply before sending out another transaction) 
    
    
5.0 Digital Subscriber Line Gateways 
   The digital subscriber line test profile is described as one 
   profile, but is actually a set of increasing functionality profiles.  
   The levels are assigned a numeric identifier, from Level 1 to Level 
   4.  The scenarios specify which level of the profile is required. It 
   is possible to define 4 separate profiles, but many devices will 
   implement several of the levels, and it was not considered 
   appropriate to have to reconfigure the device for a specific level 
   for each scenario.   
   Level 1 corresponds to the simplest possible gateway that can be 
           instructed to make connections between terminations but 
           little else 

  
megaco          Informational - Expires January, 2001               5 
                     Megaco Interop Test Profile            July 2000 
 
 
   Level 2 corresponds to a low functionality gateway that can detect 
           DTMF and generate simple call progress tones so that basic 
           call is possible 
   Level 3 corresponds to a full functionality digital gateway with 
           local signalling/DTMF detection  
    
   5.1 Identification 
   This profile shall be entitled "Digital Subscriber Line 
   Interoperability Test Profile".   The version number shall be 1.  
   This name shall be returned from a conforming gateway when sending 
   the ServiceChange message as part of initial registration of the MG 
   in the Profile section of the ServiceChange Descriptor.   
    
   5.2 Packages Implemented 
   A conforming gateway shall implement at least the following 
   packages: 
      Package Name      ID     Ver Level Defined In 
       Network          nt      1   1     Annex E 
       TDM Circuit      tdmc    1   1     Annex E* 
       RTP              rtp     1   1     Annex E* 
       Generic          g       1   2     Annex E 
       Base Root        root    1   2     Annex E 
       Tone Detect      tonedet 1   2     Annex E 
       DTMF Detect      dd      1   2     Annex E 
       Tone Generator   tonegen 1   3     Annex E 
       DTMF Generate    dg      1   3     Annex E 
       Continuity Test  ct      1   3     Annex E 
    
   *Note: In general, increasing levels incorporate all lower level 
   requirements.   
    
   Gateways not supporting RTP (for example, an MG supporting ATM AAL1) 
   need not support the RTP package, but instead would support the 
   appropriate media transport package. 
    
   5.3 Naming Conventions 
    
   5.3.1 Gateway Naming Conventions 
   The MG name, used in Registration and in the header of commands, 
   shall be the string "GATEWAY" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MG test environments, the 
   digit will normally be zero.  In multiple gateway scenarios, the 
   gateways are numbered from 0 to 9. 
    
   5.3.2 Controller Naming Conventions 
   The MGC name, used in Registration and in the header of commands, 
   shall be the string "CONTROLLER" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MGC test environments, the 
   digit will normally be zero.  In multiple MGC scenarios, the 
   gateways are numbered from 0 - 9. 
    
   5.3.3 Termination Names 
    
  
megaco          Informational - Expires January, 2001               6 
                     Megaco Interop Test Profile            July 2000 
 
 
   5.3.3.1 Physical Terminations 
   There shall be two at least two terminations – "line/1" and 
   “line/2".  Some tests need a third termination, which would be names 
   line/3 
    
   5.3.3.2 Ephemeral Terminations 
   RTP flows shall be named "rtp/1", "rtp/2", … 
    
   5.4 Topology Descriptor 
   Topology descriptors are needed only for one test, 6.11. 
    
    
   5.5 Service Change Descriptor 
   For Level 1, only a Primary MGC should be provisioned (normally, 
   "GATEWAY0").  For Level 2-4, the Gateway shall allow one primary and 
   at least two secondary MGCs to be provisioned for registration.   
    
   5.6 Transport 
   MGCs shall implement both UDP and TCP transport.  MGs can implement 
   either or both.  If the MG can use both, attempt testing with UDP 
   first, then repeat with TCP. 
    
   5.7 Security 
   Testing of security (IPSEC is recommended) is included.  Most tests 
   can be completed without security mechanisms, but testing with 
   security enabled in advanced tests is highly recommended. 
    
   5.8 Encoding 
   Most gateways at the test will use text encoding.  Binary encoding 
   will be tested.  
     
   5.9 Media 
   IP connected gateways shall implement RTP flows with G.711 encoding.  
   ATM connected gateways shall use AAL1 or AAL2 flows with G.711 
   encoding 
 
6. Scenarios for Digital Subscriber Line Gateways 
    
   6.1 Hotel Phone 
   Requires Level 1 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  When off hook is detected on term/1, 
   send ring to term/2.  When off hook is detected on term/2, stop 
   ring, and create media flow between term/1 and term/2.  When on hook 
   is detected on term/1, tear down the media flow. 
    
   6.2 Basic Call 
   Requires Level 2 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  When off hook is detected on term/1, 

  
megaco          Informational - Expires January, 2001               7 
                     Megaco Interop Test Profile            July 2000 
 
 
   establish a North American Dialing Plan digitmap.  If 555-1212 is 
   called, send ring to term/2.  Proceed as above. 
    
   6.3 Normal Operation of Simple Gateway 
   Requires Level 3. 
    
   Use your normal registration procedures.  Registration should always 
   succeed.  Audit as normal.  When offhook is detected on term/1, 
   return dialtone to term/1 and establish a North American Dialing 
   Plan.  If any number except 555-1212 is dialed, return error tone.  
   If 555-1212 is dialed, send ring to term/2 and ringback to term/1.  
   When term/2 goes off-hook, stop ring and ringback and establish 
   media flow.  When either term/1 or term/2 goes on hook, tear down 
   media flow. 
    
   6.4 Two Gateway Basic Call 
   Requires Level 3 
    
   Use your normal registration procedures for two MGs.  Audit as 
   normal.  Follow the same procedure as in Scenario 6.4, but construct 
   the call from MG0 term/1 to MG1 term/2. 
    
   6.5 Secondary Registration 
   Requires Level 1 
    
   Provision MG for MGC0 as primary and MGC1 as secondary.  Attempt to 
   register to MGC0.   MGC0 should refuse and not offer a 
   ServiceChangeMgcId.  MGC1 should accept registration.   
   Repeat with provisioning MG for MGC0 as primary and no secondary.  
   Attempt to register to MGC0.  MGC0 should refuse and offer MGC1 as 
   ServiceChangeMgcId.  Registration to MGC1 should succeed. 
 
   6.6 Three way call with two local terminations 
   Requires Level 3 
   
   As with Scenario 6.4.  While the call is up, term/3 calls term/1. 
   Use Flash to switch between term/2 and term/3 
   
   6.7 Three way call with two remotes 
   As with Scenario 6.6, but use MG0 term/1 calling MG1 term/1, 
   And then MG0 term/2 calls MG1 term/1 
   
   6.8 Continuity test 
   Follow 6.3, but run a continuity test prior to establishing the call 
   
7. Feature invocation for Digital Subscriber Line Gateways 
   Follow procedures in section 4 above 
    
8. Trunk Gateways 
   The trunk test profile consists of a single level, with trunks 
   (presumed to be equivalent to IMTs, that only have the capability to 
  
megaco          Informational - Expires January, 2001               8 
                     Megaco Interop Test Profile            July 2000 
 
 
   make connections between ports of the gateway and media flows over 
   the network  
    
   8.1 Identification 
   This profile shall be entitled "TGW Interoperability Test Profile".   
   The version number shall be 1.  This name shall be returned from a 
   conforming gateway when sending the ServiceChange message as part of 
   initial registration of the MG in the Profile section of the 
   ServiceChange Descriptor.   
    
   8.2 Packages Implemented 
   A conforming gateway shall implement at least the following 
   packages: 
      Package Name      ID     Ver Level Defined In 
       Network          nt      1   1     Annex E 
       TDM Circuit      tdmc    1   1     Annex E* 
       RTP              rtp     1   1     Annex E* 
       Generic          g       1   1     Annex E 
       Base Root        root    1   1     Annex E 
       Continuity Test  ct      1   1     Annex E 
    
   Gateways not supporting RTP (for example, an MG supporting ATM AAL1) 
   need not support the RTP package, but instead would support the 
   appropriate media transport package. 
    
   8.3 Naming Conventions 
    
   8.3.1 Gateway Naming Conventions 
   The MG name, used in Registration and in the header of commands, 
   shall be the string "GATEWAY" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MG test environments, the 
   digit will normally be zero.  In multiple gateway scenarios, the 
   gateways are numbered from 0 to 9. 
    
   8.3.2 Controller Naming Conventions 
   The MGC name, used in Registration and in the header of commands, 
   shall be the string "CONTROLLER" followed by one decimal digit.  The 
   digit shall be provisionable.  In single MGC test environments, the 
   digit will normally be zero.  In multiple MGC scenarios, the 
   gateways are numbered from 0 - 9. 
    
   8.3.3 Termination Names 
    
   8.3.3.1 Physical Terminations 
   There shall be two at least two terminations - "line/1" and 
   "line/2".  Some tests need a third termination, which would be names 
   line/3 
    
   8.3.3.2 Ephemeral Terminations 
   RTP flows shall be named "rtp/1", "rtp/2", etc.
    
   8.4 Topology Descriptor 
   Topology descriptors are needed only for one test, 9.11. 
  
megaco          Informational - Expires January, 2001               9 
                     Megaco Interop Test Profile            July 2000 
 
 
    
    
   8.5 Service Change Descriptor 
   The Gateway shall allow one primary and at least two secondary MGCs 
   to be provisioned for registration.   
    
   8.6 Transport 
   MGCs shall implement both UDP and TCP transport.  MGs can implement 
   either or both.  If the MG can use both, attempt testing with UDP 
   first, then repeat with TCP. 
    
   5.7 Security 
   Testing of security (IPSEC is recommended) is included.  Most tests 
   can be completed without security mechanisms, but testing with 
   security enabled in advanced tests is highly recommended. 
    
   5.8 Encoding 
   Most gateways at the test will use text encoding.  Binary encoding 
   will be tested.  
     
   5.9 Media 
   IP connected gateways shall implement RTP flows with G.711 encoding.  
   ATM connected gateways shall use AAL1 or AAL2 flows with G.711 
   encoding 
 
9. Scenarios for Digital Subscriber Line Gateways 
    
   9.1 Simple Connection 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  Create media flow between term/1 and 
   term/2.  Verify correct operation, and drop the call. 
    
   9.2 Basic Call 
    
   Registration should have no options, and should always succeed.  No 
   Audit should be performed.  Perform continuity test on term/1.  
   Construct RTP flows such that you have two contexts and media flows 
   from term/1 to rtp/1 to rtp/2 to term/2.  Verify media flow and take 
   down the call. 
    
   9.3 Two Gateway Basic Call 
    
   Use your normal registration procedures for two MGs.  Audit as 
   normal.  Follow the same procedure as in Scenario 9.2, but construct 
   the call from MG0 term/1 to MG1 term/2. 
    
   9.4 Secondary Registration 
    
   Provision MG for MGC0 as primary and MGC1 as secondary.  Attempt to 
   register to MGC0.   MGC0 should refuse and not offer a 
   ServiceChangeMgcId.  MGC1 should accept registration.   

  
megaco          Informational - Expires January, 2001              10 
                     Megaco Interop Test Profile            July 2000 
 
 
   Repeat with provisioning MG for MGC0 as primary and no secondary.  
   Attempt to register to MGC0.  MGC0 should refuse and offer MGC1 as 
   ServiceChangeMgcId.  Registration to MGC1 should succeed. 
 
   9.5 Three way call with two local terminations 
   
   As with Scenario 9.3.  While the call is up, term/3 calls term/1. 
   Use Flash to switch between term/2 and term/3 
   
   9.6 Three way call with two remotes 
   As with Scenario 9.5, but use MG0 term/1 calling MG1 term/1, 
   And then MG0 term/2 calls MG1 term/1 
   
10. Feature invocation for Digital Subscriber Line Gateways 
   Follow procedures in section 4 above 
   
   
    
11. References 
    
 
   1. Cuervo, et. al., "Megaco Protocol", RFC3015, November, 2000. 
    
    
    
    
12. Author's Addresses 
    
   Brian Rosen 
   Marconi 
   1000 FORE Drive 
   Phone: +1 724 742 6826 
   Email: brian.rosen@marconi.com 
    
    
6. Full Copyright Statement 
 
   Copyright (C) The Internet Society July 14, 2000. All Rights 
   Reserved. This document and translations of it may be copied and 
   furnished to others, and derivative works that comment on or 
   otherwise explain it or assist in its implementation may be 
   prepared, copied, published and distributed, in whole or in part, 
   without restriction of any kind, provided that the above copyright 
   notice and this paragraph are included on all such copies and 
   derivative works. However, this document itself may not be modified 
   in any way, such as by removing the copyright notice or references 
   to the Internet Society or other Internet organizations, except as 
   needed for the purpose of developing Internet standards in which 
   case the procedures for copyrights defined in the Internet Standards 
   process must be followed, or as required to translate it into it 
   into languages other than English. 

  
megaco          Informational - January, 2001              11 
                     Megaco Interop Test Profile            July 2000 
 
 
    
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
    
   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
    
    
    








































  
megaco          Informational – Expires January, 2001              12 