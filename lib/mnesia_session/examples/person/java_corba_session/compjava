#!/bin/csh
# Bygger java komponenter i examples biblioteket

set path = ($path /opt/SUNWjws/JDK/bin)

set cpath=(".:./java_output")
set cpath=("$cpath"":/clearcase/otp/libraries/orber/priv")
set cpath=("$cpath"":/opt/local/pgm/OrbixWeb2.0.1/classes")

if (${?CLASSPATH} == 1) then
    setenv CLASSPATH "$cpath"":$CLASSPATH"
else
    setenv CLASSPATH $cpath
endif

echo "Making erlang.idl"
idl -jc /clearcase/otp/libraries/ic/include/erlang.idl
echo "Making mnesia_corba_session.idl"
idl -jc -I /clearcase/otp/libraries/ic/include -D _CORBA_ /clearcase/otp/libraries/mnesia_session/src/mnesia_corba_session.idl
echo "Making person.idl"
idl -jc -A ../person.idl
echo "Making InitialReferences.idl"
idl -jc /clearcase/otp/libraries/orber/examples/Stack/InitialReferences.idl
echo "Making cos_naming.idl"
idl -jc /clearcase/otp/libraries/orber/COSS/CosNaming/cos_naming.idl

echo ""
echo $CLASSPATH
echo ""

echo "Compiling java at dir ./java_output/*.java"
javac java_output/*.java
echo "Compiling java at dir ./java_output/*/*.java"
javac java_output/*/*.java
echo "Compiling java at dir . person_ex.java"
javac person_ex.java

echo "run example with java person_ex <hostname> 4001"
