<HTML>
<HEAD>
  <TITLE>Tools Release Notes (Old)</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF">

<CENTER><H1>Tools Release Notes (Old)</H1></CENTER>

<h2>Tools 2.0</h2>


<!--- ----------------------------------------------------------------- --->

<h3>Fixed errors and malfunctions</h3>

<ul>

  <li>
    xref bug fix: variables LM and AM were not always disjoint.<br>
    (Own Id: OTP-3921)<p>
  </li>

</ul>


<!--- ----------------------------------------------------------------- --->

<h3>Improvements and new features</h3>

<ul>

  <li>
    <p>Coast was much too slow and ineffiecient, especially for large
    modules. Also, it was discovered that Coast in some cases returned
    erroneous values.</p> <p>Consequently, Coast has been discontinued and
    is replaced with a new tool <b>Cover</b> with similar interface and
    functionality. Refer to the Tools User's Guide and Reference Manual for
    more information about Cover.</p><br>
    (*** POTENTIAL INCOMPATIBILITY ***)<br>
    (Own Id: OTP-3622)<p>
  </li>

  <li>
    The functions <code>xref:m/1</code> and <code>xref:d/1</code> return a
    list of undefined functions in case the BEAM files do not contain debug
    information.<br>
    (Own Id: OTP-3879)<p>
  </li>

  <li>
    <code>xref</code> represents unresolved calls with calls where the
    module, the function or the number of arguments are atoms and integers
    that are unlikely to occur in an Erlang system. Calls to
    <code>erlang:apply/2</code> and the like are included among the
    external calls. This is in contrast to R7 where calls to
    <code>apply</code> and <code>spawn</code> were used for representing
    unresolved calls.<br>
    (*** POTENTIAL INCOMPATIBILITY ***)<br>
    (Own Id: OTP-3948)<p>
  </li>

  <li>
    The default value of the Xref option <code>verbose</code> has been
    changed from <code>true</code> to <code>false</code>. The function
    <code>xm/1</code>, which cross reference checks a module by calling
    <code>xref:m/1</code>, has been added to the <code>c</code> module.<br>
    (Own Id: OTP-4101)<p>
  </li>

  <li>
    Added a web based user interface to Cover.<br>
    (Own Id: OTP-4105)<br>
    (Aux Id: OTP-4104)<p>
  </li>

  <li>
    The old cross reference tool <code>exref</code> has now been removed,
    use the new tool <code>xref</code> instead.<br>
    (Own Id: OTP-4140)<p>
  </li>

</ul>

<h2>Tools 1.6.3</h2>
<h3>Improvements and new features</h3>
<ul>
  <li>
    A preliminary version of the new Fprof tool has been added.<br>
   (Own Id: OTP-4010)<p>
  </li>
</ul>

<H2>Tools 1.6.2</H2>
<H3>Improvements and new features</H3>

<UL>

<LI>
The functions <CODE>xref:m/1</CODE> and <CODE>xref:d/1</CODE> return 
a list of undefined functions in case the BEAM files do not 
contain debug information.
<br>Own Id: OTP-3879


</UL>

<H2>Tools 1.6.1</H2>
  <H3>Known Problems</H3>
  <P>See Tools 1.6.</P>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>
      The following changes has been made to Xref:
      <UL>
        <LI><CODE>xref:m/1</CODE> has been changed to accept a filename.</LI>
        <LI>bug fix: the predefined analysis <CODE>locals_not_called</CODE>
          and <CODE>xref:m/1</CODE> could sometimes miss unused local
          functions.</LI>
        <LI>bug fix: the bit syntax is now recognized...</LI>
        <LI>bug fix: setting the library path to <CODE>code_path</CODE> did
          not force the setting up of data.</LI>
        <LI># has lower precedence now.</LI>
        <LI>only atoms are allowed as release and application names.</LI>
        <LI>invalid symbolic links are ignored unless the extension is
          recognized (<CODE>.beam</CODE> typically).</LI>
        <LI>calls where the module is fixed but the function is not are no
          longer unresolved; instead the "function" <CODE>'$F_EXPR'</CODE>
          is "called".</LI>
        <LI><CODE>xref_compiler:format_error/1</CODE> has been improved.</LI>
        <LI>bug fix: calls to <CODE>'MNEMOSYNE RULE'</CODE> et al removed.
        </LI>
        <LI><CODE>m/1</CODE> and <CODE>d/1</CODE> return a list that always
          contains two elements.</LI>
        <LI><CODE>xref_parser:t2s/1</CODE> adds quotes to atoms that need
          them.</LI>
        <LI>the documentation is less incomplete and buggy.</LI>
        <LI>the strict operator has been documented (it was present in the
          code before).</LI>
      </UL>
      Own Id: OTP-3681
    </LI>
  </UL>


<H2>Tools 1.6</H2>
  <H3>Known Problems</H3>
  <UL>
    <LI>Externally defined macros are not handled correctly in Coast.<BR>
      Own Id: OTP-3273<BR>
      Aux Id: seq3910
    </LI>
  </UL>

  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI><CODE>make:all()</CODE> no longer unnecessarily recompiles modules located in other directories than the current working directory.<BR>
      Own Id: OTP-3336<BR>
      Aux Id: Seq 4055
    </LI>
    <LI>When waiting for a reply from the Coast server process, the user interface functions did a <CODE>receive</CODE> that accepted any term. The <CODE>receive</CODE> has now been restricted to accept only the correct replies and not accidently a message from some other process.<BR>
      Own Id: OTP-3394<BR>
      Aux Id: Seq 4209
    </LI>
    <LI><CODE>coast:compile_all/1,2</CODE> now returns the correct return value <CODE>{error,Reason}</CODE> if the directory given as argument does not exist or cannot be read.<BR>
      Own Id: OTP-3500<BR>
      Aux Id: Seq 4394
    </LI>
    <LI>The function <CODE>instrument:memory_data/0</CODE> returned invalid information if an address or size exceeded 2^27. <CODE>instrument:store_memory_data</CODE> did not have that problem.<BR>
      Own Id: OTP-3635
    </LI>
  </UL>

  <H3>Improvements and new features</H3>
  <UL>
    <LI><CODE>make:all()</CODE> now recompiles modules where an include file has been modified.<BR>
      Own Id: OTP-3088<BR>
      Aux Id: seq1645, seq4228
    </LI>
    <LI>The eprof module has been optimised to minimise the measuring overhead. Typically, the measured program runs at about 50% of its ordinary speed.<BR>
      Own Id: OTP-3163
    </LI>
    <LI>xref is a new cross reference tool.<BR>
      Own Id: OTP-3639
    </LI>
  </UL>


<H2>Tools 1.5.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Eprof was corrected because the <CODE>trace</CODE> BIF and format of trace messages were changed.<BR>
      Own Id: OTP-3369
    </LI>
  </UL>

<H2>Tools 1.5.1</H2>
  <H3>Improvements and New Features</H3>
  <UL>
    <LI>The memory information obtained with the <CODE>instrument</CODE> module now contains an additional field, which represents the process which allocated a block.<BR>
      Own Id: OTP-3142
    </LI>
  </UL>

  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Due to a bug in Coast, a module could be initialized repeatedly. However, it is only necessary to initiate a module once and this is now fixed.<BR>
      Own Id: OTP-3225
    </LI>
  </UL>

<H2>Tools 1.4.3</H2>
  <H3>Incompatibilities With Tools 1.4</H3>
  <P>The module dbg is moved to the <STRONG>Runtime tools application</STRONG></P>

  <H3>Known Problems</H3>
  <UL>
    <LI>In <CODE>cover</CODE> two or more processes, running the same code, may in rare situations give rise to race conditions when updating the ETS table used.<BR>
      Own Id: OTP-2625
    </LI>
    <LI><CODE>cover</CODE> counts the number of executed statements, instead of the number of function calls. (This problem is solved by using <CODE>coast</CODE> instead!)<BR>
      Own Id: OTP-1247
    </LI>
    <LI><CODE>cover</CODE> doesn't store the accumulated data persistently.<BR>
      Own Id: OTP-1318
    </LI>
  </UL>

<H2>Tools 1.4.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>In Coast, recursive function calls containing other function calls as arguments are now recognised as being recursive.<BR>
      Own Id: OTP-1981
    </LI>
    <LI>In Coast there can no longer be a race condition if two (or more) processes, running the same code, tries to update the ETS tables used.<BR>
      Own Id: OTP-2625
    </LI>
  </UL>

  <H3>Incompatibilities With Tools 1.4</H3>
  <UL>
    <LI>The <CODE>run</CODE> function call will, if the call to the Coast-compiled module fails, return an exit signal instead of the tuple {'EXIT', Reason}.</LI>
    <LI>The internal representation of data has been changed, meaning that all previously Coast-compiled modules have to be recompiled.</LI>
  </UL>

  <H3>Known Problems</H3>
  <UL>
    <LI>In <CODE>cover</CODE> two or more processes, running the same code, may in rare situations give rise to race conditions when updating the ETS table used. <BR>
      Own Id: OTP-2625
    </LI>
    <LI><CODE>cover</CODE> counts the number of executed statements, instead of the number of function calls. (This problem is solved by using <CODE>coast</CODE> instead!)<BR>
      Own Id: OTP-1247
    </LI>
    <LI><CODE>cover</CODE> doesn't store the accumulated data persistently. <BR>
      Own Id: OTP-1318
    </LI>
  </UL>

<H2>Tools 1.4</H2>
  <P>There is a new document module creating Emacs TAGS files, <CODE>tags</CODE>.</P>

  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI><CODE>exref:delete_module/1</CODE> now works properly.<BR>
      Own Id: OTP-1115
    </LI>
    <LI><CODE>exref</CODE> no longer have problems with guards (such as <CODE>record</CODE> and <CODE>atom</CODE>) in list comprehension (LC) expressions.<BR>
      Own Id: OTP-1291
    </LI>
    <LI><CODE>exref</CODE> no longer mixes up modules.<BR>
      Own Id: OTP-1220
    </LI>
    <LI><CODE>exref</CODE> no longer changes the working directory.<BR>
    </LI>
    <LI><CODE>exref</CODE> now handles internal functions correctly under certain conditions.</LI>
    <LI> When using the <CODE>auto</CODE> option, exref no longer enters an infinite loop.</LI>
  </UL>

  <H3>Incompatibilities With Tools 1.2.1</H3>
  <UL>
    <LI><CODE>exref:module</CODE> no longer accepts modules specified as strings, so the implementation now agrees with the documentation.</LI>
  </UL>

  <H3>Known Problems</H3>
  <UL>
    <LI>In Coast a recursive function call containing another function call as argument is currently not recognised as being recursive, unless the function call used as argument is made to a module not having been coast-compiled.<BR>
      Own Id: OTP-1981
    </LI>
    <LI><CODE>cover</CODE> counts the number of executed statements, instead of the number of function calls. (This problem is solved by using <CODE>coast</CODE> instead!)<BR>
      Own Id: OTP-1247
    </LI>
    <LI><CODE>cover</CODE> doesn't store the accumulated data persistently. <BR>
      Own Id: OTP-1318
    </LI>
    <LI>In Emacs occurances of <CODE>$</CODE> confuses indentation mechanism.<BR>
      Own Id: OTP-1203, OTP-1674, OTP-1675
    </LI>
  </UL>

<H2>Tools 1.2.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The function <CODE>make:all</CODE> now works withoout a <CODE>Emakefile</CODE>.<BR>
      Own Id: OTP-1340
    </LI>
    <LI><CODE>exref</CODE> now know about the language construct <CODE>query</CODE>.<BR>
       Own Id: OTP-1368
    </LI>
  </UL>

  <H3>Known Problems</H3>
  <UL>
    <LI>The function <CODE>exref:delete_module/1</CODE> does not work properly, so subesquent calls to <CODE>exref:analyse</CODE> will give incorrect results.<BR>
       Own Id: OTP-1115<BR>
    </LI>
  </UL>

<H2>Tools 1.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Deadlock situation with COVER compile solved.<BR>
      Own Id: OTP-1072<BR>
      Aux Id: HA34612
    </LI>
    <LI>Cover does now work with include files.<BR>
      OwnId: OTP-1074<BR>
      Aux Id: HA34302
    </LI>
    <LI>Changed cover to used <CODE>filename:find_src/1</CODE> instead of the obsolete <CODE>file_util</CODE> module.</LI>
  </UL>

  <H3>Known Problems</H3>
  <UL>
    <LI>Not cleaning up when module removed.</LI>
  </UL>

<H2>Tools 1.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Cover did not use <CODE>Options</CODE> in <CODE>file/2</CODE> in a correct way (OTP-1074).</LI>
    <LI>Cover tried to load the &#34;tools&#34; application dynamically which could cause deadlock in the startup if cover-compiled modules are involved at this stage. The attempt to load the application is now removed (must be specified in the start script).</LI>
  </UL>

</BODY>
</HTML>
