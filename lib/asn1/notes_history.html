<HTML>
<HEAD>
<TITLE>ASN1 Release Notes (Old)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<BLOCKQUOTE>
<P>This document describes the changes made to old versions of the <CODE>asn1</CODE> application.


<H2>Asn1 1.2.9.6</H2>
<H3>Known problems</H3>

<UL>

<LI>
The compiler does not check that an exported name actually exists in the ASN.1 module.
<br>Own Id: OTP-3659


<LI>
The compiler does not check that a value referenced by name does exist.
<br>Own Id: OTP-3277



<LI>
BER: The compiler does not take the extensions into account when checking if
the tags are unique in a SEQUENCE or SET.
<br>Own Id: OTP-3304

</UL>

<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
PER: Trailing zeroes in a BIT STRING declared without named bits
 should not be removed in the encodings.
<br>Own Id: OTP-3830
</UL>

<H2>Asn1 1.2.9.5</H2>
<H3>Known problems</H3>
<P>Same as for 1.2.9.3.</P>

<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
PER: Constraints are not propagated when types are
referring to each other. Example:
<code> 
                TBCD-STRING ::= OCTET STRING
 
                LAI ::= TBCD-STRING (SIZE(3))
</code> 
                The size constraint is not passed on during encode,decode
                resulting in wrong encoding for PER , it is
                coded with a length determinant which should not be there
                when the length is fixed. For BER this does not matter because the constraints does
                not affect the encodings.
<br>Own Id: OTP-3713
                
<LI>
 The generated code gets wrong if there are several ENUMERATED fields in a SEQUENCE or SET, this is now corrected.
<br>Own Id: OTP-3796

<LI>
BER:Decode of a type T ::= SEQUENCE OF C fails if C is encoded with indefinite length.
                This is know corrected.
<br>Own Id: OTP-3811
</UL>

<H2>Asn1 1.2.9.3</H2>
<H3>Known problems</H3>

<UL>

<LI>
The compiler does not check that an exported name actually exists in the ASN.1 module.
<br>Own Id: OTP-3659


<LI>
The compiler does not check that a value referenced by name does exist.
<br>Own Id: OTP-3277



<LI>
BER: The compiler does not take the extensions into account when checking if
the tags are unique in a SEQUENCE or SET.
<br>Own Id: OTP-3304

</UL>

<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
This version supports soft upgrade from versions 1.2.6 1.2.7.

<LI>
In an ENUMERATED type like this:<br>
		T ::= ENUMERATED { blue, green}<br>
		The symbols was encoded/decoded with the wrong values, i.e in
		reverse order. This is now corrected.
<br>Own Id: OTP-3700

<LI>
PER: OCTET STRING with Size constrained to a single value i.e fixed size
		was treated wrong during encode and decode. This is now corrected.
<br>Own Id: OTP-3701
</UL>

<H3>Improvements and new features</H3>

<UL>
<LI>
There is now a new compiler option <code>ber_bin</code> available that can be used to 
generate encode/decode functions for BER that uses the new "bit-syntax" to
make the functions more efficient. The <code>ber_bin</code> option is used
as an alternative to the <code>ber</code> and <code>per</code> options.
<p>
The encode function then produces a
possibly nested list of binaries and integer lists. The decode function does 
in this case require a single binary as input instead of a list.
The modules generated with this option require that you have an R7A  or later
system, otherwise they will not compile and the runtime module asn1rt_ber_bin
can not be executed.
<p>
The ber_bin option is not officially supported in this version (will be
in a later version) but is provided for those who want to try it. 
It should be significantly faster at decode and is slightly faster at encode.
Exactly how performance differs between this binary approach and the
list approach depends highly on the type of input.
Another thing worth noting is that both approaches still have a lot of
solutions in common which can be improved a lot to gain even better 
performance. 
</UL>

<H2>Asn1 1.2.9.2</H2>

<H3>Fixed errors and malfunctions</H3>

<UL>


<LI>
BER: Encode/decode of extension components did not work properly. This is now corrected.
<br>Own Id: OTP-3395
<br>Aux Id: 

PER:The encode/decode of NULL as an open type has been corrected. An open type must always have a length of at least 1 byte even if the contained 
value (e.g NULL) encodes to nothing.
<br>Own Id: OTP-3496
<br>Aux Id: 

<LI>
BER:In the current implementation extension components of a SEQUENCE are required
to be present when they are specified as mandatory. This is an error, all extension
components are "optional" even if they are not specified to have the OPTIONAL or
DEFAULT property. This is now corrected.
<br>Own Id: OTP-3278


</UL>

<H3>Improvements and new features</H3>

<UL>
<LI>
The ASN.1 language feature <CODE>COMPONENTS OF</CODE> is now implemented.
<br>Own Id: OTP-2515

<LI>
The encoding and decoding of ENUMERATED and
INTEGER with NamedNumbers is made more efficient and thus
faster in runtime.
<br>Own Id: OTP-3464
<br>Aux Id:

<LI>
Added support for encode/decode of open type which is
constrained to a specific type. Previously the value of
an open type had to be a list of  octets, but now the Erlang
representation of the specific type used in the constraint
is used both as input to encode and as output from decode.
<br>Own Id: OTP-3569
<br>Aux Id: 

<LI>
PER: GeneralString, GraphicalString etc. i.e all strings
that are not so called "known-multiplier character
string types" are now supported by the runtime 
encode/decode functions.
<br>Own Id: OTP-3573
<br>Aux Id:

</UL>



<H2>Asn1 1.2.6</H2>
<H3>Known problems</H3>

<UL>

<LI>
The ASN.1 language feature <CODE>COMPONENTS OF</CODE> is not implemented.
<br>Own Id: OTP-2515


<LI>
The compiler does not check that a value referenced by name does exist.
<br>Own Id: OTP-3277


<LI>
BER:In the current implementation extension components of a SEQUENCE are required
to be present when they are specified as mandatory. This is an error, all extension
components are "optional" even if they are not specified to have the OPTIONAL or
DEFAULT property.
<br>Own Id: OTP-3278


<LI>
BER: The compiler does not take the extensions into account when checking if
the tags are unique in a SEQUENCE or SET.
<br>Own Id: OTP-3304


</UL>

<H3>Fixed errors and malfunctions</H3>

<UL>
<LI>
This version supports soft upgrade from versions 1.1.1, 1.1.5 and 1.1.6.
Two new runtime modules <code>asn1rt_ber_v1</code> and 
<code>asn1rt_per_v1</code> are delivered together with the old ones. This makes
it possible to continue running applications with modules generated with the
previous version of the asn1 compiler while modules generated by this version
will use the new runtime modules. Note that it is only advice-able to continue
running old generates if they are working perfectly and have no need 
for the corrections made in this version of the asn1 application.


<LI>
BER: SEQUENCEs encoded with indefinite length was not correctly decoded.
		This in now corrected.
<br>Own Id: OTP-3352
<br>Aux Id: Seq 4100

</UL>

<H2>Asn1 1.2.4</H2>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
The compiler now  detects multiple definitions of values and types and reports this as
an error. Previously this was detected when the generated Erlang module was compiled.
<br>Own Id: OTP-3105


<LI>
BER: An error regarding encoding of <CODE>ENUMERATED</CODE> present in asn1-1.1.1 
is corrected. The new version 1.1.2 of asn1 containing this correction is 
delivered as a "patch".
<br>Own Id: OTP-3169


<LI>
BER: Decoding of <CODE>SEQUENCE OF</CODE> and <CODE>SET OF</CODE> with indefinite length is corrected.
The correction was first delivered in version 1.1.2.
<br>Own Id: OTP-3170


<LI>
BER: Encoding and decoding of <CODE>ENUMERATED</CODE> 
with extensionmark
"..." did not work (crashed with a runtime error). This
has now been corrected. If an unknown enumerated value is
decoded (for an extensible enumerated type) 
it is returned as <CODE>{asn1_enum,Value}</CODE> where
<CODE>Value</CODE> is an integer. Enumerated values in this format
are also accepted by the encoder.  
ASN.1 modules containing 
<CODE>ENUMERATED</CODE> with extensionmark should be 
recompiled with the corrected
version of the compiler. The BER runtime functions are also
corrected.
Note that this correction has already been delivered as a
bugfix for R4B (OTP-2951).
<br>Own Id: OTP-3202<br>
Aux Id: Seq3745


<LI>
BER: The primitive/constructed bit in the tag byte of an encoding
is not correct when it comes to user defined tags.
For example in <CODE> T ::= [2] SEQUENCE { a BOOLEAN} </CODE>
the tag 2 does not get the constructed bit set which it should.
This is now corrected.
<br>Own Id: OTP-3241


<LI>
The decoder can now detect if there are unexpected bytes 
remaining when all components of a sequence are decoded.
The decoder will then return <CODE>{error,{asn1{unexpected,Bytes}}}</CODE>
<br>Own Id: OTP-3270


<LI>
Values of type <CODE>OBJECT IDENTIFIER</CODE> was sometimes returned as an Erlang list
(ASN.1 constants) and  sometimes as a tuple (from the decode functions). This is now
changed so that <CODE>OBJECT IDENTIFIER</CODE> values always are represented as an Erlang
tuple.
<br>Own Id: OTP-3280


<LI>
PER:The encode/decode functions could not handle integers with 
a range greater than 16#7ffffff. This limit is now removed.
<br>Own Id: OTP-3287


<LI>
PER: The encoding/decoding of the length for a SET OF/SEQUENCE OF
was wrong if there was a size constraint. This is now corrected.
<br>Own Id: OTP-3291


<LI>
PER: Encoding of a constrained INTEGER (range > 16 k) was wrong for
the value 0. This is now corrected.
<br>Own Id: OTP-3306


</UL>
<H3>Improvements and new features</H3>

<UL>

<LI>
The ASN.1 module name and the filename where the ASN.1 specification resides must match each other (has always been the case). This is now checked by the compiler. The check requires that the names match in a case or case insensitive way depending on the characteristics for the current system.
<br>Own Id: OTP-1843


<LI>
PER: Encode/decode of an extension value (i.e not within the root set) for
<CODE>ENUMERATED</CODE> did not work properly. This is now corrected.
If an unknown enumerated value is
decoded (for an extensible enumerated type) 
it is returned as <CODE>{asn1_enum,Value}</CODE> where
<CODE>Value</CODE> is an integer. Enumerated values in this format
are also accepted by the encoder (if the value is >= the number of known 
extension values).
<br>Own Id: OTP-2930


<LI>
Unnecessary printouts from the compiler are removed.
The compiler version and the compiler options are now
printed to stdout.
<br>Own Id: OTP-3276


<LI>
In order to better suite the use of ASN.1 in embedded systems only 
the modules needed in runtime are now listed in the <CODE>.app</CODE> file.
<br>Own Id: OTP-3279


<LI>
The compiler now supports extensionmarker in constraint specifications.
Example: <CODE>INTEGER (0..10, ...)</CODE>
In previous version this was reported as a syntax error.
<br>Own Id: OTP-3281


<LI>
A very limited part of ITU-T recommendation X.681 
Abstract Syntax Notation One (ASN.1): Information
object specification is now implemented. Specifically 	
TYPE IDENTIFIER is reqognized by the compiler.
<br>Own Id: OTP-3325


<LI>
Parameterization of ASN.1 specifications (ITU-T X.683) is now
supported to a limited extent.
<br>Own Id: OTP-3326


</UL>

<H2>Asn1 1.1.3.1</H2>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
BER Encoding and decoding of <CODE>ENUMERATED</CODE> 
with extensionmark
"..." did not work (crashed with a runtime error). This
has now been corrected. If an unknown enumerated value is
decoded (for an extensible enumerated type) 
it is returned as <CODE>{asn1_enum,Value}</CODE> where
<CODE>Value</CODE> is an integer. Enumerated values in this format
are also accepted by the encoder.  
ASN.1 modules containing 
<CODE>ENUMERATED</CODE> with extensionmark should be 
recompiled with the corrected
version of the compiler. The BER runtime functions are also
corrected.
Note that this correction has already been delivered as a
bugfix for R4B (OTP-2951).
<br>Own Id: OTP-3202<br>
Aux Id: Seq3745


</UL>

<H2>Asn1 1.1.1</H2>
<H3>Known problems</H3>

<UL>

<LI>
The syntactic construct <CODE>COMPONENTS OF</CODE> is not
implemented.
<br>Own Id: OTP-2515


<LI>
<CODE>ANY</CODE> and <CODE>ANY DEFINED BY</CODE> are currently not 
supported.
<br>Own Id: OTP-2741<br>
Aux Id: seq 1188


<LI>
Multiple definitions of the same Type or Value is not detected
by the compiler. The error occurs when the generated Erlang
module is compiled.
<br>Own Id: OTP-3105


</UL>
<H2>Asn1 1.1</H2>
<H3>Known problems</H3>

<UL>

<LI>
The primitive/constructed bit in the tag byte of an encoding
is not correct when it comes to user defined tags.
For example in <CODE> T ::= [2] SEQUENCE { a BOOLEAN} </CODE> 
the tag 2 does not get the constructed bit set which it should.
This is now corrected.
<br>Own Id: OTP-3241


</UL>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
The BER decoder failed to decode certain nested data types
where <CODE>IMPLICIT</CODE> tags where involved. 
This is now corrected.
<br>Own Id: OTP-2719<br>
Aux Id: seq 1148


<LI>
The handling of types with extension marker "..." is corrected.
Earlier each SEQUENCE and SET with an extension marker got an
extra field named <CODE>asn1_EXT</CODE> in the generated record.
This was a mistake and that field is now removed (conserns
both BER and BER).
<br>Own Id: OTP-2724<br>
Aux Id: seq 1148, OTP-2719


<LI>
The decoder (both BER and PER) could not handle unnamed
bits of a <CODE>BIT STRING</CODE> if the type had any 
named bits declared. This is now corrected and the unnamed
bits are returned as <CODE>{bit,Pos}</CODE> where Pos is the bit 
position. The <CODE>{bit,Pos}</CODE> can be used as input to the
encoder too.
<br>Own Id: OTP-2725<br>
Aux Id: seq 1148,OTP-2719,OTP-2724


<LI>
The functions <CODE>asn1rt:decode</CODE> and <CODE>asn1ct:decode</CODE>
did not always return <CODE>{ok,Result}</CODE> or 
<CODE>{error,Reason}</CODE> as documented. This is now corrected.
<br>Own Id: OTP-2730<br>
Aux Id: seq 1158


<LI>
The compiler did not accept CHOICE types as components 
of a SEQUENCE or SET when
the modules tag default was IMPLICIT. 
Example:<br>
<code>
C ::= CHOICE { ......}
A ::= SEQUENCE {
a [1] C, -- This was not accepted
.....
</code>		
This was an error
caused by a misinterpretation of the ASN.1 standard. This
is now corrected.
<br>Own Id: OTP-2731<br>
Aux Id: seq 1163


<LI>
When decoding a SEQUENCE A which contains an OPTIONAL component
b which is a SEQUENCE with mandatory components, the decoder
does not detect as an error that a mandatory component of b
is missing. The same error could occur also in other cases
with nested types and optional components of SEQUENCE or SET.
This is now corrected.
<br>Own Id: OTP-2738<br>
Aux Id: seq 1183


<LI>
BER Encoding and decoding of <CODE>ENUMERATED</CODE> 
with extensionmark
"..." did not work (crashed with a runtime error). This
has now been corrected. If an unknown enumerated value is
decoded (for an extensible enumerated type) 
it is returned as <CODE>{asn1_enum,Value}</CODE> where
<CODE>Value</CODE> is an integer. Enumerated values in this format
are also accepted by the encoder.  
ASN.1 modules containing 
<CODE>ENUMERATED</CODE> with extensionmark should be 
recompiled with the corrected
version of the compiler. The BER runtime functions are also
corrected.
<br>Own Id: OTP-2951<br>
Aux Id: Seq 1446 OTP-2929


<LI>
The compiler does now accept all valid value notations
for the OBJECT IDENTIFIER type. The generated code for
those values is also corrected.
<br>Own Id: OTP-3059


</UL>
<H3>Improvements and new features</H3>

<UL>

<LI>
The code generated for BER is significantly enhanced resulting
in less code and around 300% better performance in runtime 
for the encoding of complex ASN.1 values. The performance of
decoding is unchanged.
<br>Own Id: OTP-2806

</UL>

<H2>Asn1 1.0.3</H2>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
The <CODE>asn1.app</CODE> file is corrected.
<br>Own Id: OTP-2640


<LI>
The encoding of integers in BER did not comply with the
standard for all values. The values was not encoded
in the minimum number of octets as required. This is
now corrected in the runtime module <CODE>asn1rt_ber</CODE>.
<br>Own Id: OTP-2666


</UL>
<H3>Improvements and new features</H3>

<UL>

<LI>
The compiler now generates explicit exports directives for 
all generated
functions that should be exported (instead of -compile(export_all)). 
This eliminates the warnings from the Erlang compiler when 
compiling the 
generated file.
<br>Own Id: OTP-1845

</UL>


<H2>R3B02 (Asn1 1.0.2)</H2>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
The decoding of a BER encoded SEQUENCE with optional component
of type SEQUENCE (also with optional components) could result 
in an error or wrong result if the tags are equal.
<br>Own Id: OTP-2226


<LI>
The encoding of (PER) SEQUENCE with extensionmark was wrong.
This is now corrected.
<br>Own Id: OTP-2349


</UL>
<H2>R3A (Asn1 0.9)</H2>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
The asn1 compiler now detects the use of an implicit tag before <CODE>CHOICE</CODE> as an error (in accordance with the standard)
<br>Own Id: OTP-1844


<LI>
An OPTIONAL CHOICE embedded in SEQUENCE when BER coding
caused an error when generating decode code. This is now
corrected.
<br>Own Id: OTP-1857<br>
Aux Id: OTP-1848


</UL>

<A NAME="1"><!-- Empty --></A><H2>1 ASN1 0.8.1</H2><P>This is the first release of the ASN1 application. This version is released
for beta-testing. Some functionality will be added until the 1.0 version is
released. See the release notes for the latest version for the exact details about new features. A list of missing features and restrictions can be found in the
chapter below.

<A NAME="1.1"><!-- Empty --></A><H3>1.1 Missing features and other restrictions</H3><P><UL>
<LI> 
         The encoding rules BER and PER (aligned) is supported. <STRONG>PER (unaligned) 
         IS NOT SUPPORTED</STRONG>.
        <BR>
<LI> 
         NOT SUPPORTED types <CODE>ANY</CODE> and <CODE>ANY DEFINED BY</CODE> 
         (is not in the standard any more).
        <BR>
<LI> 
         NOT SUPPORTED types <CODE>EXTERNAL</CODE> and <CODE>EMBEDDED-PDV</CODE>. 
        <BR>
<LI> 
         NOT SUPPORTED type <CODE>REAL</CODE> (planned to be implemented). 
        <BR>
<LI> 
         The code generation support for value definitions in the ASN.1 notation is very limited
         (planned to be enhanced).
        <BR>
<LI>     The support for constraints is limited to:
         <BR>
<UL>
<LI>            SizeConstraint  SIZE(X)
         <BR>
<LI>            SingleValue     (1)
         <BR>
<LI>            ValueRange      (X..Y)
         <BR>
<LI>            PermittedAlpabet FROM (but not for BMPString and UniversalString when generating PER).
         <BR>
</UL>

         Complex expressions in constraints is not supported (planned to be extended).
        <BR>
<LI> 
         The current version of the compiler has very limited error checking:
         <BR>
<UL>
<LI>Stops at first syntax error.
         <BR>
<LI>Does not stop when a reference to an undefined type is found , 
                but prints an error message. Compilation of the generated 
                Erlang module will then fail.
         <BR>
<LI>A whole number of other semantical controls is currently missing. This
                means that the compiler will give little or bad help to detect what's wrong
                with an ASN.1 specification, but will mostly work very well when the
                ASN.1 specification is correct.
         <BR>
</UL>

        <LI> 
         The maximum INTEGER supported in this version is a signed 64 bit integer. This
         limitation is probably quite reasonable. (Planned to be extended).
        <BR>
<LI> 
         Only AUTOMATIC TAGS supported for PER.
        <BR>
<LI> 
         Only EXPLICIT and IMPLICIT TAGS supported for BER.
        <BR>
<LI> 
         The compiler supports decoding of BER-data with indefinite length but it is 
         not possible to produce data with indefinite length with the encoder. 
<BR>
</UL>
</BLOCKQUOTE>
<CENTER>
<HR>
<FONT SIZE=-1>
Copyright &copy; 1991-99
<A HREF="http://www.ericsson.se">Ericsson Utvecklings AB</A><BR>
<!--#include virtual="/ssi/otp_footer.html"-->
</FONT>
</CENTER>
</BODY>
</HTML>
