<HTML>
<HEAD>
  <TITLE>Stdlib Release Notes</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF">

<CENTER><H1>Stdlib Release Notes</H1></CENTER>

<H2>Stdlib 1.8.1</H2>
<H3>Improvements and new features</H3>

<UL>

<LI>
<CODE>lists:sort/2</CODE> is stable again.
<br>Own Id: OTP-3344


<LI>
The command-completion feature of the shell has been
improved. Pressing the tab key now also lists possible completions
(but only if no new character was added to the completion).
<br>Own Id: OTP-3354


</UL>
<H2>Stdlib 1.8</H2>
<H3>Known problems</H3>

<UL>

<LI>
If Erlang is started with longnames
(e.g., <code>erl -name foo</code>),
then <code>slave:start/1</code> on a nonexistent host exits
instead of returning an error tuple.
<br>Own Id: OTP-2635


<LI>
Excessively large variable numbers in the matching functions
in the <CODE>ets</CODE> module can crash Erlang or block it for
a long time, e.g., <CODE>ets:match(Table, '$123456789')</CODE>.
<br>Own Id: OTP-3064


<LI>
The shell allows patterns which do not have pattern syntax
(for example function calls); they become patterns which
always fail to match.
<br>Own Id: OTP-3284


</UL>
<H3>Fixed errors and malfunctions</H3>

<UL>

<LI>
When <CODE>c:c(File, Options)</CODE> was used with options such
that an intermediate file was produced instead of an
object file (e.g., 'S'), it still tried to load an object
file (which would be the old one, if one existed).
<br>
This has been changed. A warning message will be printed
(<CODE>Warning: No object file created - nothing loaded</CODE>)
and no object file will be loaded even if an (older) object
file exists.
<br>Own Id: OTP-3056<br>
Aux Id: OTP-3054


<LI>
Erlang shell line editing (e.g., M-B to back up over a word)
didn't handle all Latin-1 characters correctly.
<br>Own Id: OTP-3158


<LI>
<CODE>ets:tab2list/1</CODE> returned the list in the wrong order
for a table of type <CODE>ordered_set</CODE>.
<br>Own Id: OTP-3319


</UL>
<H3>Improvements and new features</H3>

<UL>

<LI>
The new lint option <CODE>{warn_format, Verbosity}</CODE> causes
warnings to be given for malformed calls to <CODE>io:format</CODE>
and some similar functions. <CODE>Verbosity</CODE> is an integer
which determines the amount of warnings to give (0 = no
warnings).
<br>Own Id: OTP-1387


<LI>
Dets now has a write through caching mechanism as well as
an auto save feature. Dets more seldom needs to repair files.
<br>Own Id: OTP-1831<br>
Aux Id: OTP-1526


<LI>
Many functions in stdlib do not enforce the types which the
functions are documented to accept, thus resulting in
undefined behaviour when given arguments of invalid type.
Stricter error checking has been added to some functions in
stdlib, namely
<CODE>io:get_chars</CODE>,
<CODE>lists:keymember/3</CODE>,
<CODE>lists:keysearch/3</CODE>,
<CODE>lists:keydelete/3</CODE> and
<CODE>lists:keyreplace/4</CODE>,
resulting in an exit if an invalid argument is given.
<br>(*** POTENTIAL INCOMPATIBILITY ***)
<br>Own Id: OTP-2689<br>
Aux Id: OTP-2441


<LI>
New functions <CODE>lists:sort(Fun, List)</CODE> and
<CODE>lists:merge(Fun, List1, List2)</CODE> can be used for
sorting/merging with respect to any criterion;
<CODE>Fun(A,B)</CODE> should
return whether <CODE>A</CODE> comes before <CODE>B</CODE> in the
ordering.
<br>Own Id: OTP-2948


<LI>
A new function <CODE>c:bt(Pid)</CODE>, available in the shell
without module prefix, shows a stack backtrace for a
process (i.e., calls <CODE>erlang:process_display(Pid,
backtrace)</CODE>).
<br>Own Id: OTP-3122


<LI>
The new function <CODE>c:q()</CODE> (also defined in the module
<CODE>shell_default</CODE> so that the module prefix need not be
given in the shell) calls <CODE>init:stop</CODE>, and thus provides
a short command to stop Erlang in a controlled way.
<br>Own Id: OTP-3123


<LI>
The functions <CODE>behaviour_info/[0,1]</CODE> have been
removed from the module <CODE>systools</CODE>.
<br>(*** POTENTIAL INCOMPATIBILITY ***)
<br>Own Id: OTP-3159<br>
Aux Id: OTP-1965


<LI>
The function <CODE>c:i()</CODE> now gives two lines of information
for each process, including: heap size, stack size,
registered name.
<br>Own Id: OTP-3160


<LI>
The output functions in the <CODE>io</CODE> module
no longer return an error term in case of
errors; they exit instead.
<br>(*** POTENTIAL INCOMPATIBILITY ***)
<br>Own Id: OTP-3178


<LI>
The new lint option <CODE>warn_unused_vars</CODE> causes warnings to
be given for variables which are not used (unless they begin
with an underscore, in which case no warning is given).
<br>Own Id: OTP-3181


<LI>
Parenthesis-matching in the shell has been improved.
A new command key ^] performs
visible parenthesis blink, like the closing characters
(i.e., ')', '}' or ']'),
but it also inserts the proper matching character.
The closing characters now beep if the matching opening
character isn't of the right kind.
<br>Own Id: OTP-3250


<LI>
Enable the supervisor to handle other replies than {ok, Pid} when starting children.
<br>Own Id: OTP-3251


<LI>
The erl_internal:builtins/0 function has been removed.
<br>(*** POTENTIAL INCOMPATIBILITY ***)
<br>Own Id: OTP-3300


<LI>
Due to an oversight, the following improvement was
left out of the documentation in previous releases:
The operator <CODE>--</CODE> performs list subtraction.
It is also available as the function <CODE>lists:subtract/2</CODE>.
<br>Own Id: OTP-3318


<LI>
The following functions in the <CODE>lists</CODE> module now have
a faster implementation compared to previous releases:
<CODE>map/2</CODE>, <CODE>last/1</CODE>, <CODE>keysearch/3</CODE>,
<CODE>keymember/3</CODE> and all sorting functions.
The functions <CODE>member/2</CODE>, <CODE>reverse/2</CODE>,
<CODE>keysearch/3</CODE> and <CODE>keymember/3</CODE> are now
entirely implemented as BIFs.
<br>Own Id: OTP-3334


<LI>
Ets tables on remote nodes can no longer be accessed directly.
Also, the format of the table identifiers returned by
<CODE>ets:open/2</CODE> have changed. Incorrectly written applications
that assume that the table identifier is a tuple will no
longer work.
<br>
Most functions in the <CODE>ets</CODE> module are now BIFs. The internal
and undocumented BIFs that the <CODE>ets</CODE> module used to call
have been removed. Applications that incorrectly used the those
BIFs directly will no longer work.
<br>(*** POTENTIAL INCOMPATIBILITY ***)
<br>Own Id: OTP-3337


</UL>

There are also release notes for 
<A HREF="notes_history.html">older versions</A>.

</body>
</html>
