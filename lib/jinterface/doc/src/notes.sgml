<!doctype chapter PUBLIC "-//Stork//DTD chapter//EN">
<chapter>
  <header>
    <title>Jinterface Release Notes
    <prepared>otp_appnotes
    <docno>nil
    <date>nil
    <rev>nil
  </header>
  
  <p>This document describes the changes made to the Jinterface application.

<section><title>Jinterface 1.3</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    <c>OtpMbox.receive()</c> and <c>OtpMbox.receive(long
	    timeout)</c> can now throw
	    <c>OtpErlangDecodeException</c> if the received message
	    can not be decoded. <c>null</c> is now only returned from
	    <c>OtpMbox.receive(long timeout)</c> if a timeout occurs.
	    <c>OtpMbox.receive()</c> will never return <c>null</c>.
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***
          <p>
	    Own Id: OTP-3932 Aux Id: seq5196 
        </item>
        <item>
          <p>
	    Strings longer than 65535 bytes were encoded wrong by
	    jinterface.
          <p>
	    Own Id: OTP-4883 Aux Id: OTP-4865 
        </item>
        <item>
          <p>
	    Misc bugfixes: <list> <item>A node pinging itself does no
	    longer cause the java program to hang.
          <p>
	    <item><c>OtpMbox.close()</c> uses exit reason
	    <c>'normal'</c> (atom) instead of <c>"normal"</c>
	    (string).
          <p>
	    <item>Added <c>OtpNode.closeMbox(OtpMbox mbox,
	    OtpErlangObject reason)</c>.
          <p>
	    <item>Added <c>OtpMbox.exit(OtpErlangObject reason)</c>
	    and <c>OtpMbox.exit(String reason)</c>.
          <p>
	    <item>Added <c>OtpMbox.exit(OtpErlangPid to,
	    OtpErlangObject reason)</c>.
          <p>
	    <item><c>OtpMbox.exit(OtpErlangPid to, String reason)</c>
	    is now equivalent to <c>OtpMbox.exit(to, new
	    OtpErlangAtom(reason))</c>.
          <p>
	    <item>Exit signals from an Erlang node can now contain
	    any erlang term as reason, not only atoms. </list>
          <p>
	    Own Id: OTP-5088
        </item>
        <item>
          <p>
	    For java versions 1.3.1 or later, <c>localStatus</c> was
	    not sent to registered status handler when
	    <c>OtpNode.close()</c> was called. This is now corrected.
          <p>
	    Own Id: OTP-5169
        </item>
      </list>
    </section>


    <section><title>Improvements and New Features</title>
      <list>
        <item>
	    <p> Process identifiers and port identifiers have been
	    made more unique. Previously 18 bits were used as id in
	    the internal representation of process and port
	    identifiers. Now 28 bits are used. </p> <p> The maximum
	    limit on the number of concurrently existing processes
	    due to the representation of pids has been increased to
	    268435456 processes. The same is true for ports. This
	    limit will at least on a 32-bit architecture be
	    impossible to reach due to memory shortage. </p> <p>
	    <em>NOTE:</em> By default, the <c>ERTS</c>, and the
	    <c>erl_interface</c>, <c>ei</c>, and <c>jinterface</c>
	    libraries are now only guaranteed to be compatible with
	    other Erlang/OTP components from the same release. It is
	    possible to set each component in compatibility mode of
	    an earlier release, though. See the documentation for
	    respective component on how to set it in compatibility
	    mode. </p>
          <p>
	    *** POTENTIAL INCOMPATIBILITY ***
          <p>
	    Own Id: OTP-4968 Aux Id: OTP-4196 
        </item>
      </list>
    </section>

</section>
<section><title>Jinterface 1.2.1.2</title>

    <section><title>Fixed Bugs and Malfunctions</title>
      <list>
        <item>
          <p>
	    Output of Java long was truncated to 32 bits. IDL long
	    long and unsigned long long could not be used in a struct
	    for the Java backend. All unsigned integer types for the
	    Java backend had broken marshalling for large values.
	    These bugs has now been fixed.
          <p>
	    Own Id: OTP-4763 Aux Id: seq8024 
        </item>
      </list>
    </section>

</section>
</chapter>
