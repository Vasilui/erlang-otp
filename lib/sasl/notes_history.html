<HTML>
<HEAD>
  <TITLE>Sasl Release Notes</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF">

<CENTER><H1>Sasl Release Notes</H1></CENTER>

<H2>SASL 1.9.1 (R7B01)</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>
      If a new application was added using <CODE>code:replace_path/2</CODE>,
      the <CODE>code:lib_dir/1</CODE> function would fail on the new
      application name. This has been corrected.<BR>
      Own Id: OTP-3780<BR>
      Aux Id: Seq 5003
    </LI>
    <LI>
      A printout has been added in <CODE>release_handler</CODE> when
      <CODE>install_release</CODE> fails.<BR>
      Own Id: OTP-3767<BR>
      Aux Id: seq4983
    </LI>
  </UL>

<H2>Sasl 1.9 (R7B)</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>
      In the release handler the upgrade instructions before
      the point_of_no_return instruction, were executed in reverse order.<BR>
      Own Id: OTP-3604
    </LI>
    <LI>
      In the release handler, the tar file containing a release was not
      removed after the release had been successfully unpacked.<BR>
      Own Id: OTP-3605
    </LI>
    <LI>
      In the release handler, the relative matching of release versions
      (e.g. 3.1 matches 3.1.1) was wrong. Such matching has been removed
      altogether, and now only exact matches are allowed.<BR>
      Own Id: OTP-3606
    </LI>
    <LI>
      In systools, when reordering instructions with respect to dependency,
      the case of duplicate instructions for the same module was not
      properly checked.<BR>
      Own Id: OTP-3607
    </LI>
  </UL>

<H2>Sasl 1.8.3</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>
      Release handler didn't find topmost supervisors.<BR>
      Own Id: OTP-3452
    </LI>
    <LI>
      Processes were suspended in the wrong order.<BR>
      Processes are now suspended and resumed in correct order: suspension
      is in the order of dependency, and resumption is in the reversed order
      of dependency (both for upgrade and downgrade). Furthermore, modules
      are loaded in the reversed order of dependency at upgrade, and in
      the order of dependency at downgrade.<BR>
      Own Id: OTP-3453<BR>
      Aux Id: seq4270
    </LI>
    <LI>
      Empty suspend and remove instructions are now removed from boot
      scripts.<BR>
      Own Id: OTP-3469
    </LI>
    <LI>
      Modules added by the add_module instruction was not in the dependency
      chain.<BR>
      Own Id: OTP-3477
    </LI>
  </UL>
 

<H2>Sasl 1.8.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The high-level release upgrade instructions <CODE>add_application</CODE> and <CODE>remove_application</CODE> were broken.<BR>
      Own Id: OTP-3347
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>The high-level release upgrade instruction <CODE>restart_application</CODE> has been added.<BR>
      Own Id: OTP-3347
    </LI>
    <LI>All modules in the Sasl application have got new vsn-numbers.<BR>
       Own Id: OTP-3330
    </LI>
  </UL>

<H2>Sasl 1.8.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The entries for Erlang machine and version in OTP-MIB were mixed up.<BR>
      Own Id: OTP-3204<BR>
      Aux Id: seq3710
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>One more option, <CODE>restart_emulator</CODE>, has been added to <CODE>systools:make_relup()</CODE>. The presence of this options ensures that a complete reboot of the system is done when the system is upgraded or downgraded.<BR>
      Own Id: OTP-2561<BR>
      Aux Id: seq 922
    </LI>
    <LI>The functions <CODE>behaviour_info/[0,1]</CODE> have been removed from the module <CODE>systools</CODE>.<BR>
      (*** POTENTIAL INCOMPATIBILITY ***)<BR>
      Own Id: OTP-3159<BR>
      Aux Id: OTP-1965
    </LI>
    <LI>The function <CODE>release_handler:install_release/2</CODE> takes two more options: <CODE>code_change_timout</CODE> overrides the default timeout used while waiting for a module to perform code change; <CODE>suspend_timeout</CODE> overrides the timeout supplied by the high-level instruction <CODE>update</CODE> or by the low-level instruction <CODE>suspend</CODE>. Valid values are integers greater than zero, <CODE>infinity</CODE> and <CODE>default</CODE>.<BR>
      Own Id: OTP-3321<BR>
      Aux Id: Seq4014
    </LI>
  </UL>

<H2>Sasl 1.8.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The high-level release upgrade instructions <CODE>add_application</CODE> and <CODE>remove_application</CODE> were broken.<BR>
      Own Id: OTP-3347
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>The high-level release upgrade instruction <CODE>restart_application</CODE> has been added.<BR>
      Own Id: OTP-3347
    </LI>
    <LI>All modules in the Sasl application have got new vsn-numbers.<BR>
      Own Id: OTP-3330
    </LI>
  </UL>

<H2>Sasl 1.8.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The entries for Erlang machine and version in OTP-MIB were mixed up.<BR>
      Own Id: OTP-3204<BR>
      Aux Id: seq3710
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>One more option, <CODE>restart_emulator</CODE>, has been added to <CODE>systools:make_relup()</CODE>. The presence of this options ensures that a complete reboot of the system is done when the system is upgraded or downgraded.<BR>
      Own Id: OTP-2561<BR>
      Aux Id: seq 922
    </LI>
    <LI>The functions <CODE>behaviour_info/[0,1]</CODE> have been removed from the module <CODE>systools</CODE>.<BR>
      (*** POTENTIAL INCOMPATIBILITY ***)<BR>
      Own Id: OTP-3159<BR>
      Aux Id: OTP-1965
    </LI>
    <LI>The function <CODE>release_handler:install_release/2</CODE> takes two more options: <CODE>code_change_timout</CODE> overrides the default timeout used while waiting for a module to perform code change; <CODE>suspend_timeout</CODE> overrides the timeout supplied by the high-level instruction <CODE>update</CODE> or by the low-level instruction <CODE>suspend</CODE>. Valid values are integers greater than zero, <CODE>infinity</CODE> and <CODE>default</CODE>.<BR>
      Own Id: OTP-3321<BR>
      Aux Id: Seq4014
    </LI>
  </UL>

<H2>Sasl 1.7.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>If a system is started and a permanent application has erroneous environment parameters, the system should crash. This is the behaviour now, before the system only printed an error report. The system will only crash if the application is started from a boot script genrated by calling systools:make_script/1/2. If application:start/1/2 is called the behaviour is as before.<BR>
      Note: affects the result of the systools:make_script/1/2. systools:make_script generates now a call to application:start_boot/2 instead of as prevoiusly a call to application:start/2.<BR>
      Own Id: OTP-3002
    </LI>
    <LI>It is now allowed that an application X includes application Y, and application Y in its turn is depending of application X. Previously this caused a circular dependency in systools:make_script.<BR>
      Own Id: OTP-3065<BR>
      Aux Id: Seq 1593 (OTP-2564, Seq 921)
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>It is possible to define a new parameter when installing a new release at upgrade. The parameter defines if the node should be restarted or rebooted in case of an error at installation. Syntax is as follows:<BR>
      release_handler:install_release(Vsn, Opt) where Opt = [{error_action, EA}] EA = restart | reboot<BR>
      Default value is restart. The old install_release/1 gives also the default error action restart, as before.<BR>
      Own Id: OTP-2966<BR>
      Aux Id: Seq 1464
    </LI>
    <LI>When a module with behaviour <CODE>gen_server</CODE>, <CODE>gen_event</CODE> or <CODE>gen_fsm</CODE> was compiled, warnings were given for absent call-back functions, except for <CODE>code_change</CODE>. Now, a warning is given for absent <CODE>code_change</CODE> as well.<BR>
      Own Id: OTP-3148<BR>
      Aux Id: OTP-3072, OTP-3026
    </LI>
  </UL>

<H2>Sasl 1.7</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The transient applications were previously treated as temporary applications if an error was detected during start.<BR>
      Own Id: OTP-2718<BR>
      Aux Id: seq 1136
    </LI>
    <LI>
Release handler accepts now all types of Erlang terms in 
-vsn(term()).
      Own Id: OTP-2740<BR>
      Aux Id: seq 1181
    </LI>
    <LI>When an application was removed from a node the code was previously not removed from the memory.<BR>
      Own Id: OTP-2760
    </LI>
    <LI>Better error messages from systool:make_script.<BR>
      Own Id: OTP-2768<BR>
      Aux Id: seq 1226
    </LI>
    <LI>The instructions for kernel in a release upgrade script were not executed, neither were the configuration parameters for kernel updated when upgrading the system. This is now corrected.<BR>
      Own Id: OTP-2997
    </LI>
  </UL>


<H2>Sasl 1.6.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>In previous releases of OTP it was not possible to upgrade the Erlang emulator (named e.g jam471 or beam471) because the executable file was renamed for each new version. This is now corrected by always giving the same name (jam or beam) without version number to the executable file.<BR>
      Own Id: OTP-2372
    </LI>
    <LI>If a local application had permission set to false initially, it was previously started anyway. Sasl could also hang in some cases when permission was changed, this is now corrected.<BR>
      Own Id: OTP-2463<BR>
      Aux Id: Seq 858
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>The parameter start_phases not correctly checked when creating the boot file.<BR>
      Own Id: OTP-2610
    </LI>
  </UL>


<H2>Sasl 1.6.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Failover of a loaded MIB did not work. When a MIB was loaded on one node and that node crashed, the failover of the MIB to a new node did not work.<BR>
      Own Id: OTP-2200<BR>
      Aux Id: seq 651, HA75679
    </LI>
    <LI>It is now allowed for an included application to use its own top application; i.e to have the top application in the applications-key in the resource file.<BR>
      Own Id: OTP-2564<BR>
      Aux Id: Seq 921
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>systools checks for illegal options in the function parameters.<BR>
      Own Id: OTP-1851
    </LI>
    <LI>A crash of the release_handler process now crashes the enitre application Sasl, which normally means that the node restarts.<BR>
      Own Id: OTP-2516<BR>
      Aux Id: seq851
    </LI>
  </UL>


<H2>Sasl 1.5</H2>
  <H3>Fixed Errors and Malfunctions</H3><P><UL>
    <LI>The release handler didn't handle downgrades correctly. The downgrade script wasn't found even though it did exist.<BR>
      Own Id: OTP-2298<BR>
      Aux Id: seq755
    </LI>
    <LI>The function <CODE>release_handler:create_RELEASES/4</CODE> now handles the new syntax with other restart type than <CODE>permanent</CODE> in the <CODE>.rel</CODE> file.<BR>
      Own Id: OTP-2319<BR>
      Aux Id: seq777
    </LI>
  </UL>

  <H3>Improvements and New Features</H3><P><UL>
    <LI>The <CODE>code_change</CODE> instruction is extended with explicit support for downgrades.<BR>
      The <CODE>update</CODE> instruction is extended with information needed for downgrades.<BR>
      Text about dowgrades is added in the documentation. See the chapter &#34;Release Handling&#34; in the User's guide.<BR>
    </LI>
  </UL>


<H2>Sasl 1.4.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Failover/takeover of the SNMP agent administering the MIB did not work, since the old implementation tried to delete a Mnesia table on a node which was not up and running (which always is the case at failover). Now the SNMP related Mnesia table is defined to have the <CODE>local_content</CODE> property. <BR>
      Own Id: OTP-2146 <BR>
      Aux Id: seq1
    </LI>
  </UL>

<H2>Sasl 1.4</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>A code-only application with no dependecies to other applications is now started correctly, when a start script is generated with <CODE>systools:make_script</CODE> <BR>
      Own Id: OTP-1580
    </LI>
    <LI><CODE>rb</CODE> handles unknown reports.<BR>
      Own Id: OTP-1595
    </LI>
    <LI>The <CODE>erlNodeWallClock</CODE> counter in <CODE>OTP-MIB</CODE> is now a real <CODE>Counter32</CODE> objects; i.e. wraps to 0 when 2^32 is reached.<BR>
      Own Id: OTP-1604
    </LI>
    <LI><CODE>systools:make_script</CODE> does not sort applications when it is not necessary. The order specified in the <CODE>.rel</CODE> file is maintained.<BR>
      Own Id: OTP-1644
    </LI>
    <LI>The release handling instruction <CODE>sync_nodes</CODE> could hang forever if one node tried to sync before the other node was ready.<BR>
      Own Id: OTP-1959
    </LI>
  </UL>

  <H3>Improvements and New Features</H3>
  <UL>
    <LI>The syntax of the different files defined by Sasl is defined in separate documents. Check the reference manual for <CODE>appup(4)</CODE>, <CODE>rel(4)</CODE>, <CODE>relup(4)</CODE> and <CODE>script(4)</CODE>.
    </LI>
    <LI>It is now possible to customise where the release handler writes its files. The release installation procedure can now be run without write access to the installation root directory.<BR>
      Own Id: OTP-1635<BR>
      Aux Id: HA54792
    </LI>
    <LI>A release packet as constructed with <CODE>systools:make_tar</CODE> is now a compressed tar file (<CODE>.tar.gz</CODE>) on all platforms. <CODE>systools</CODE> and <CODE>release_handler</CODE> use the new compress functions in <CODE>erl_tar</CODE>.<BR>
      Own Id: OTP-1710
    </LI>
    <LI>It is now possible to specify the restart type of an application in the <CODE>.rel</CODE> file. Previously, all applications were started as <CODE>permanent</CODE> applications.<BR>
      Own Id: OTP-1835
    </LI>
  </UL>


<H2>Sasl 1.3.2</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>Better tar file open/close control in <CODE>systools_make</CODE>.</LI>
  </UL>


<H2>Sasl 1.3.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI><CODE>systools:make_script</CODE> creates the boot script according to new requirements of kernel servers.<BR>
      Own Id: OTP-1393
    </LI>
  </UL>


<H2>Sasl 1.3</H2>
  <H3>Improvements and New Features</H3>
  <UL>
    <LI>Introduced new attribute, <CODE>included_applications</CODE>, in application resource files (<CODE>.app</CODE>). This attribute is used to group a number of applications together. Included applications are not started automatically by the system (they are only loaded), thus this have to be handled by the including application.
    </LI>
    <LI>The release file, <CODE>Release.rel</CODE>, can override the <CODE>included_applications</CODE> attribute in order to exclude some of the specified (in the <CODE>.app</CODE> file) applications.
    </LI>
    <LI>Added possibilities to specifiy the path option to <CODE>systools</CODE> functions with a wildcard. The only supported wildcard is <CODE>*</CODE>. <CODE>*</CODE> is expanded to the regular expression <CODE>[^/]*</CODE>. If a wildcard is the only character between two directory separators it is treated as a place holder for exactly one directory level, i.e. the regular expression <CODE>[^/]+</CODE>.
    </LI>
    <LI>It is possible to specify symbolic names for a prefix part of a directory in <CODE>systools</CODE> functions. A variable name replaces the specified prefix in the generated boot script and tar file.<BR>
      This is useful if one want to install applications in other places than under the Erlang root directory.<BR>
      A symbolic name (variable) is specified with the <CODE>variables</CODE> option to <CODE>systools:make_script</CODE> and <CODE>systools:make_tar</CODE>. Use the <CODE>-boot_var Var Dir</CODE> command line flag in order to start a system with variables in the boot script.
    </LI>
    <LI><CODE>no_module_tests</CODE> option excludes the source code tests (parse for version and validity tests of object code) in <CODE>systools:make_script</CODE> and <CODE>systools:make_tar</CODE>. This option is always set for <CODE>systools:make_relup</CODE>. (Speeds up the generation).
    </LI>
    <LI><CODE>systools</CODE> can generate boot script and tar files for another target Erlang emulator than the current emulator. Use the <CODE>machine</CODE> option.
    </LI>
    <LI>Application <CODE>.appup</CODE> files are only read when absolutely necessary by <CODE>systools:make_relup</CODE>.
    </LI>
    <LI>The <CODE>start_erl</CODE> script shall not be modified/edited. This script now reads configuration data generated by the <CODE>release_handler</CODE>.
    </LI>
    <LI>The requirement that the <CODE>start</CODE> script (used for embedded systems) shall be located in <CODE>&#60;ERL_INSTALL_DIR&#62;/bin</CODE> is removed. It is now configurable through the Sasl configuration parameter <CODE>start_prg</CODE>.
    </LI>
    <LI>It is possible to install a release not unpacked by the <CODE>release_handler</CODE>.
    </LI>
    <LI>Added new functions in the <CODE>release_handler</CODE>:
      <UL>
        <LI><CODE>set_unpacked/2</CODE></LI>
        <LI><CODE>set_removed/1</CODE></LI>
        <LI><CODE>install_file/2</CODE></LI>
      </UL>
    </LI>
    <LI>The <CODE>release_handler</CODE> now handles diskless nodes (and/or nodes with read-only filesystems).
    </LI>
    <LI>The file <CODE>sys.config</CODE> is now mandatory, and must be present in all releases.
    </LI>
    <LI>New options <CODE>exref</CODE> and <CODE>{exref, [AppName]}</CODE> added to <CODE>systools</CODE> making it possible to perform a simple cross reference check of function calls. Only modules belonging to applications specified in the <CODE>.rel</CODE> file are checked.
    </LI>
    <LI>Created tar files (by <CODE>systools:make_tar</CODE>) are only compressed on unix systems.
    </LI>
    <LI>Added new option <CODE>var_tar</CODE> to <CODE>systools:make_tar</CODE>.
    </LI>
    <LI>Added new function to <CODE>rb</CODE>, <CODE>rb:show/0</CODE> that shows all reports.<BR>
      Own Id: OTP-1144
    </LI>
  </UL>

  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>The term output to the <CODE>relup</CODE> file by <CODE>systools:make_relup/3</CODE> is now parsable by Erlang. The function now also accept an <CODE>Description</CODE> parameter for release name lists.<BR>
      Own Id: OTP-1206<BR>
    </LI>
    <LI><CODE>systools:make_relup</CODE> now correctly handles new and obsolete applications in the appup scripts.<BR>
      Own Id: OTP-1095<BR>
    </LI>
    <LI><CODE>release_handler_1</CODE> has now been included in <CODE>sasl.app file</CODE>.<BR>
      Own Id: OTP-1178<BR>
      Aux Id: HA40608
    </LI>
    <LI>The order among the mandatory applications (kernel and stdlib) in the <CODE>.rel</CODE> file does not need to be kernel first.
    </LI>
    <LI>Fixed timeout problem in <CODE>rb:grep/1</CODE>.<BR>
      Own Id: OTP-1144
    </LI>
    <LI><CODE>release_handler:remove_release/1</CODE> handles non-existing files. When it was called and a file to be removed didn't exist, the release handler process crashed.<BR>
      Own Id: OTP-1341
    </LI>
    <LI>The wrong application version was used in the release down grading script. Note that it is necessary to include the path to all down graded releases. This can be conveniently done by using the new path options specified above.<BR>
      Own Id: OTP-1360<BR>
    </LI>
  </UL>


<H2>Sasl 1.1.1</H2>
  <H3>Fixed Errors and Malfunctions</H3>
  <UL>
    <LI>It is now possible to specify modules without version number in an application resource file (.app), i.e. <BR>
      <PRE>
...
{modules, [Module | {Module, Vsn}]}
...
      </PRE>
      Own Id: OTP-1116
    </LI>
    <LI>Restart (init:restart/0) of system did not work after a software upgrade. Started using the now old version but should have used the new (if release_handler:make_permanent has been called).<BR>
      Own Id: OTP-1113<BR>
      Aux Id: HA37170
    </LI>
  </UL>


<H2>Sasl 1.1</H2>
  <H3>Improvements and New Features</H3>
  <UL>
    <LI>Added <CODE>systools:make_script</CODE>, <CODE>systools:make_relup</CODE> and <CODE>systools:make_tar</CODE>.
    </LI>
    <LI>Added the module <CODE>overload</CODE>, an overload regulation process.
    </LI>
    <LI>Added configuration parameter <CODE>errlog_type = error | progress | all</CODE> to supress logging of certain error report types. Default is <CODE>all</CODE>.
    </LI>
    <LI>Added the OTP-MIB for SNMP monitoring of OTP.
    </LI>
  </UL>

</BODY>
</HTML>
