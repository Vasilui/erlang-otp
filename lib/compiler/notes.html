<html>
<head>
  <title>Compiler Release Notes</title>
  <style type="text/css">
<!--
    body          { background: white; margin: 3em }

    body          { font-family: Verdana, Arial, Helvetica, sans-serif }
    h1 h2 h3 h4   { font-family: Verdana, Arial, Helvetica, sans-serif }
    h1            { font-size: 48 }
    p li          { font-family: Verdana, Arial, Helvetica, sans-serif }
-->
  </style>
</head>

<body bgcolor=white>

<center><h1>Compiler Release Notes</h1></center>


<!--- ################################################################# --->

<h2>Compiler 4.0</h2>


<!--- ----------------------------------------------------------------- --->

<h3>Fixed errors and malfunctions</h3>

<ul>

  <li>
    If records happened to be defined with initializers so that they
    included each other recursively, the compilation would eat up all
    memory and then crash. Now, an error message is given instead.<br>
    (Own Id: OTP-2677)<p>
  </li>

  <li>
    When using the <code>warn_unused_vars</code> option to the compiler,
    warnings could previously be incorrectly given for variables used
    within list comprehensions.<br>
    (Own Id: OTP-3412)<p>
  </li>

  <li>
    When using the option <code>warn_unused_vars</code> when compiling,
    unused variables introduced inside a <code>case</code>,
    <code>receive</code> or <code>if</code> were not always reported.<br>
    (Own Id: OTP-3729)<p>
  </li>

</ul>


<!--- ----------------------------------------------------------------- --->

<h3>Improvements and new features</h3>

<ul>

  <li>
    The guard tests <CODE>list/1</CODE>, <CODE>atom/1</CODE> etc. now also
    have the names <CODE>is_list/1</CODE>, <CODE>is_atom/1</CODE>. All
    these guard tests are also BIFs that can be used in expression in
    function bodies, too.<br>
    (Own Id: OTP-3791)<p>
  </li>

  <li>
    There are more compiler optimisations. In particular, lists
    comprenhensions and record updates are faster.<br>
    (Own Id: OTP-4142)<p>
  </li>

  <li>
    Floating point operations are significantly faster if the compiler
    knows that floating point is involved. The guard bif
    <code>is_float/1</code> can be used ensure that the compiler knows the
    type.<br>
    (Own Id: OTP-4143)<p>
  </li>

  <li>
    To faciliate constructing records containing wildcards for functions
    such as <code>ets:match/2</code> and
    <code>mnesia:match_object/3</code>, a special field named
    <code>_</code> can now be assigned, meaning that all fields not
    explicitly assigned in the same record update will be assigned.
    Example: <code>#person{name = "Nisse", _ = '_'}</code><br>
    (Own Id: OTP-4147)<p>
  </li>

  <li>
    New short-circuit versions of <code>and</code> and <code>or</code>
    called <code>andalso</code> and <code>orelse</code> have been added.
    They terminate evaluation of the boolean expression as soon as the
    truth value is known. The new operators cannot be used in guards.<br>
    (Own Id: OTP-4148)<p>
  </li>

  <li>
    The boolean operators <code>and</code>, <code>or</code>, and
    <code>not</code> can now be used in guards.<br>
    (Own Id: OTP-4149)<p>
  </li>

  <li>
    The compiler in R8 will issue a warnings when the atoms or functions
    <code>try</code> or <code>cond</code> are used, as these will be
    keywords in a future version of Erlang.
    <br>
    (Own Id: OTP-4150)<p>
  </li>

  <li>
    In the Open-Source release of Erlang/OTP, the HiPE (High Performance
    Erlang) extension can be enabled. (Using <code>./configure
    --enable-hipe</code> when building.) If the runtime-system is
    hipe-enabled, a module can be native-code compiled like this: <br>
    <p><code>c(Module, [native|OtherOptions])</code>. <br> <p>Compiling in
    this way, the beam file will contain both standard beam byte-code and
    the native code. If loaded on a hipe-enabled system the native code
    will be loaded; otherwise the beam-code will be loaded. <br> <p>HiPE is
    supported for Ultra Sparc and Intel Pentium.<br>
    (Own Id: OTP-4153)<p>
  </li>

</ul>



There are also release notes for
<a href="notes_history.html">older versions</a>.

</body>
</html>
